<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Art Color Editor</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="main-container">
        <!-- Panel Izquierdo: Controles -->
        <div class="pane left-pane">
            <header>
                <h1>Adjustments</h1>
            </header>
            <div id="adjustments">
                <!-- Sliders -->
                <div class="slider-control">
                    <label for="brightness">Brightness: <span id="brightness-value">0</span></label>
                    <input type="range" id="brightness" min="-150" max="150" value="0" class="auto-trigger">
                </div>
                <div class="slider-control">
                    <label for="contrast">Contrast: <span id="contrast-value">0</span></label>
                    <input type="range" id="contrast" min="-50" max="100" value="0" class="auto-trigger">
                </div>
                <div class="slider-control">
                    <label for="saturation">Saturation: <span id="saturation-value">0</span></label>
                    <input type="range" id="saturation" min="-100" max="100" value="0" class="auto-trigger">
                </div>
                <div class="slider-control">
                    <label for="hue">Hue: <span id="hue-value">0</span></label>
                    <input type="range" id="hue" min="-180" max="180" value="0" class="auto-trigger">
                </div>
                 <div class="slider-control">
                    <label for="blur-sharpen">Sharpen/Blur: <span id="blur-sharpen-value">0</span></label>
                    <input type="range" id="blur-sharpen" min="-50" max="50" value="0" class="auto-trigger">
                </div>
                 <div class="slider-control">
                    <label for="dithering">Dithering: <span id="dithering-value">0</span></label>
                    <input type="range" id="dithering" min="0" max="100" value="0" class="auto-trigger">
                </div>
                 <div class="slider-control">
                    <label for="num-colors">Number of Colors: <span id="num-colors-value">30</span></label>
                    <input type="range" id="num-colors" min="2" max="30" value="30" class="auto-trigger">
                </div>
                <div class="process-controls">
                    <button id="process-btn">Generate Image!</button>
                    <div class="auto-process-wrapper">
                        <input type="checkbox" id="auto-process">
                        <label for="auto-process">Auto-generate</label>
                    </div>
                </div>
                <div id="loader" class="loader hidden"></div>
                
                <!-- CAMBIO: Secciones movidas y con l√≠nea divisoria -->
                <div class="actions-section">
                    <hr class="divider">
                    <div class="active-color-section">
                        <label>Active Color:</label>
                        <div id="active-color-swatch" title="Current selected color"></div>
                    </div>
                    <button id="download-btn" class="action-button" disabled>Download Mapped Image</button>
                </div>
            </div>
        </div>

        <!-- Panel Derecho: Previews y Paleta -->
        <div class="pane right-pane">
            <div class="previews-header">
                <div class="header-left">
                    <h3>Original</h3>
                </div>
                <div class="header-right">
                    <h3>Processed & Editable</h3>
                    <div id="toolbar">
                        <button class="tool-btn active" data-tool="pencil" title="Pencil">‚úèÔ∏è</button>
                        <button class="tool-btn" data-tool="bucket" title="Paint Bucket">üé®</button>
                        <button class="tool-btn" data-tool="eyedropper" title="Eyedropper">üíß</button>
                        <div class="separator"></div>
                        <button id="undo-btn" class="tool-btn" title="Undo" disabled>‚Ü©Ô∏è</button>
                        <button id="redo-btn" class="tool-btn" title="Redo" disabled>‚Ü™Ô∏è</button>
                    </div>
                    <div class="tool-options">
                        <input type="checkbox" id="contiguous-check" checked>
                        <label for="contiguous-check">Contiguous</label>
                    </div>
                </div>
            </div>

            <div class="preview-wrapper">
                <div class="preview-box">
                    <div class="canvas-container" id="original-canvas-container">
                        <div id="upload-box">
                            <label for="image-loader" class="file-upload-label">Select Image File</label>
                            <input type="file" id="image-loader" accept="image/*">
                        </div>
                        <canvas id="original-canvas"></canvas>
                    </div>
                </div>
                <div class="preview-box">
                    <div class="canvas-container" id="processed-canvas-container">
                        <canvas id="processed-canvas"></canvas>
                    </div>
                </div>
            </div>

            <!-- CAMBIO: Paleta movida al fondo del panel derecho -->
            <div class="palette-section">
                <div class="palette-header">
                    <h3>Resulting Color Palette</h3>
                </div>
                <div class="palette-container-wrapper">
                    <div id="palette-container"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="static/script.js"></script>
</body>
</html>