<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Art Color Editor</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <div class="main-container">
        <!-- Panel Izquierdo: Controles -->
        <div class="pane left-pane">
            <header>
                <h1>Controls</h1>
            </header>
            <div id="adjustments">
                <h3>Adjustments</h3>
                <div class="control-group special-controls">
                    <input type="checkbox" id="remove-bg" class="auto-trigger"> <label for="remove-bg">Remove BG</label>
                    <input type="checkbox" id="add-outline" class="auto-trigger"> <label for="add-outline">Add Outline</label>
                    <input type="checkbox" id="thin-outline" class="auto-trigger"> <label for="thin-outline">Thin Outline</label>
                </div>
                <!-- Sliders -->
                <div class="slider-control">
                    <label for="outline-thickness">Outline Thickness: <span id="outline-thickness-value">1</span>px</label>
                    <input type="range" id="outline-thickness" min="1" max="10" value="1" step="1" class="auto-trigger">
                </div>
                <div class="slider-control">
                    <label for="edge-enhance">Enhance Edges: <span id="edge-enhance-value">0</span></label>
                    <input type="range" id="edge-enhance" min="0" max="100" value="0" class="auto-trigger">
                </div>
                <div class="slider-control">
                    <label for="brightness">Brightness: <span id="brightness-value">0</span></label>
                    <input type="range" id="brightness" min="-50" max="50" value="0" class="auto-trigger">
                </div>
                <div class="slider-control">
                    <label for="contrast">Contrast: <span id="contrast-value">0</span></label>
                    <input type="range" id="contrast" min="-50" max="50" value="0" class="auto-trigger">
                </div>
                <div class="slider-control">
                    <label for="saturation">Saturation: <span id="saturation-value">0</span></label>
                    <input type="range" id="saturation" min="-50" max="50" value="0" class="auto-trigger">
                </div>
                <div class="slider-control">
                    <label for="hue">Hue: <span id="hue-value">0</span></label>
                    <input type="range" id="hue" min="-50" max="50" value="0" class="auto-trigger">
                </div>
                 <div class="slider-control">
                    <label for="blur-sharpen">Sharpen/Blur: <span id="blur-sharpen-value">0</span></label>
                    <input type="range" id="blur-sharpen" min="-50" max="50" value="0" class="auto-trigger">
                </div>
                 <div class="slider-control">
                    <label for="dithering">Dithering: <span id="dithering-value">0</span></label>
                    <input type="range" id="dithering" min="0" max="50" value="0" class="auto-trigger">
                </div>
                 <div class="slider-control">
                    <label for="posterize">Posterize: <span id="posterize-value">0</span></label>
                    <input type="range" id="posterize" min="0" max="100" value="0" class="auto-trigger">
                </div>
                 <div class="slider-control">
                    <label for="num-colors">Number of Colors: <span id="num-colors-value">30</span></label>
                    <input type="range" id="num-colors" min="2" max="30" value="30" class="auto-trigger">
                </div>
                <div class="process-controls">
                    <button id="process-btn">Generate Image!</button>
                    <div class="auto-process-wrapper">
                        <input type="checkbox" id="auto-process">
                        <label for="auto-process">Auto-generate</label>
                    </div>
                </div>
                 <div id="loader" class="loader hidden"></div>
            </div>
        </div>

        <!-- Panel Derecho: Previews y Paleta -->
        <div class="pane right-pane">
            <div class="preview-wrapper">
                <div class="preview-box">
                    <h3>Original</h3>
                    <div class="canvas-container" id="original-canvas-container">
                        <!-- El bot√≥n de carga ahora vive aqu√≠ -->
                        <div id="upload-box">
                            <label for="image-loader" class="file-upload-label">Select Image File</label>
                            <input type="file" id="image-loader" accept="image/*">
                            <span id="file-name">No file selected.</span>
                        </div>
                        <canvas id="original-canvas"></canvas>
                    </div>
                </div>
                <div class="preview-box">
                    <h3>Processed & Editable</h3>
                    <div id="toolbar">
                        <button class="tool-btn active" data-tool="pencil" title="Pencil">‚úèÔ∏è</button>
                        <button class="tool-btn" data-tool="eraser" title="Eraser">üßº</button>
                        <button class="tool-btn" data-tool="eyedropper" title="Eyedropper">üíß</button>
                    </div>
                    <div class="canvas-container" id="processed-canvas-container">
                        <canvas id="processed-canvas"></canvas>
                    </div>
                </div>
            </div>
            <!-- La paleta ahora vive aqu√≠ -->
            <div class="palette-section">
                <div class="palette-header">
                    <h3>Resulting Color Palette</h3>
                    <button id="download-btn" class="action-button" disabled>Download Mapped Image</button>
                </div>
                <div class="palette-container-wrapper">
                    <div id="palette-container"></div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="../static/script.js"></script>
</body>
</html>